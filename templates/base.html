<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1, width=device-width" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-datalabels/2.2.0/chartjs-plugin-datalabels.min.js"
    integrity="sha512-JPcRR8yFa8mmCsfrw4TNte1ZvF1e3+1SdGMslZvmrzDYxS69J7J49vkFL8u6u8PlPJK+H3voElBtUCzaXj+6ig=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
    crossorigin="anonymous"></script>
 
 
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@500&display=swap" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    {% block extra_css %}{% endblock %}
</head>

<body>


  <div class="setup-materials">


    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-body-tertiary" style='position: relative; width:100%;'>
      <div class="container-fluid ">
        <a class="navbar-brand" href="#">WebTDI</a>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="{% url 'home' %}">HOME</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'form' %}">FORM</a>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                TRIBES
              </a>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#">Asur</a></li>
              </ul>
            </li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                aria-expanded="false">
                PVTGS
              </a>
              <ul class="dropdown-menu">
                {% for tribe in tribes %}
                <li><a class="dropdown-item" href="{% url 'tribe_detail' tribe.slug %}">{{tribe.name}}</a></li>
                {% endfor %}
              </ul>
            </li>
            <form class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>

        </div>
      </div>
    </nav> 
    <!-- ------- -->
    {% block content %}

    {% endblock %}

    
  </div>



  <!-- JAVASCRIPT -->

  <!-- CDN LINKS -->
  
  <!-- ****** -->


  <!-- CHART JS -->
  <script>

    //DIMENTION CONTRIBUTION VERTICAL BAR
    // const vertical_bar = {{ tribal_dimensional_index| safe }};
    const vertical_graph_element = document.getElementById('vertical-bar-graph');
    var data_health = {{ dimension_contribution_to_tdi.0}};
    var data_education = {{ dimension_contribution_to_tdi.1}};
    var data_sol = {{ dimension_contribution_to_tdi.2}};
    var data_culture = {{ dimension_contribution_to_tdi.3}};
    var data_goverance = {{ dimension_contribution_to_tdi.4}};

    console.log(data_health);
    const vertical_bar_data = {
      labels: ['Dimensions'],
      datasets: [
        {
          label: 'Governance', // Removed square brackets
          data: [data_goverance], // Replace with your actual data for 'Governance'
          backgroundColor: '#C55A11', // Color for 'Governance'
        },
        {
          label: 'Culture', // Removed square brackets
          data: [data_culture], // Replace with your actual data for 'Culture'
          backgroundColor: '#BFBFBF', // Color for 'Culture'
        },
        {
          label: 'Sol', // Removed square brackets
          data: [data_sol], // Replace with your actual data for 'Sol'
          backgroundColor: '#FFD966', // Color for 'Sol'
        },
        {
          label: 'Education', // Removed square brackets
          data: [data_education], // Replace with your actual data for 'Education'
          backgroundColor: '#A9D18E', // Color for 'Education'
        },
        {
          label: 'Health', // Removed square brackets
          data: [data_health], // Replace with your actual data for 'Health'
          backgroundColor: '#5B9BD5', // Color for 'Health'
        },
      ],
    };

    const config_vertical_bar = {
      type: 'bar',
      data: vertical_bar_data,
      options: {
        barPercentage: 2,
        categoryPercentage: 1,
        indexAxis: 'x',
        aspectRatio: 0.02,
        scales: {
          x: {
            stacked: true,
            beginAtZero: true,
            display: false
          },
          y: {
            display: false,
            stacked: true,
            beginAtZero: true,
            maxTicksLimit: 16,
            autoSkip: false,
          },
        },

        plugins: {
          datalabels: {
            anchor: 'center', // Center the labels inside the bars
            align: 'center', // Align the labels to the center
            color: 'white', // Label color
            font: {
              weight: 'bold', // Label font weight
            },
            formatter: function (value, context) {
              const label = vertical_bar_data.labels[context.dataIndex];
              const dataset = vertical_bar_data.datasets[context.datasetIndex];
              const colorIndex = context.datasetIndex; // Get the color index

              // Create a legend string
              const legend = dataset.label + ',' + value;

              return legend;
            },
            display: 'auto',
          },
          legend: {
            display: false, // Hide the legend
          },
        },
      },
      plugins: [ChartDataLabels]
    };


    const vertical_bar_graph = new Chart(vertical_graph_element, config_vertical_bar);

    //UNSENSORED-GRAPH
    var myDataArray = []; // Create an array to store the data

    for (var i = 1; i <= 18; i++) {
      var myDattaElement = document.getElementById(`my-data_uncensored${i}`);
      var myDatta = myDattaElement.getAttribute("data-my-data");
      myDataArray.push(myDatta); // Store the data in the array
    }



    const uncensored_data = {
      labels: ['Chronic Disease', 'Immunisation', 'Maternal Care', 'Under 5 child mortality', 'Food Security', 'Level of Education', 'Drop-out', 'Institutional Credit', 'Land Ownership', 'Sanitation', 'Cooking Fuel', 'Source of Drinking Water', 'Electricity', 'Assets', 'Language', 'Arts and Culture', 'Voted', 'Meetings'],
      datasets: [
        {
          label: 'Uncensored',
          data: myDataArray,
          fill: false,
          backgroundColor: [
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#C5E0B4',
            '#C5E0B4',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#D9D9D9',
            '#D9D9D9',
            '#F8CBAD',
            '#F8CBAD',
          ],
          // borderColor: 'rgba(75,192,192,1)',
          borderWidth: 1,
        },
      ],
    };

    const config_uncensored = {
      type: 'bar',
      data: uncensored_data,
      options: {
        indexAxis: 'y',
        scales: {
          xAxes: [
            {
              ticks: {
                stepSize: 1,
                beginAtZero: true,
                autoSkip: false,

              },

            },
          ],
          yAxes: [
            {
              ticks: {
                stepSize: 1,
                beginAtZero: true,
                maxTicksLimit: 16,
                autoSkip: false
              },

            },
          ],

          x: {
            grid: {
              drawOnChartArea: false,
              display: false
            }
          },
          y: {
            grid: {
              drawOnChartArea: false,
              display: false
            }
          }
        },
        plugins: {
          datalabels: {
            anchor: "end",
            align: "right"
          }
        }
      },
      plugins: [ChartDataLabels]
    };

    const uncensored_graph = new Chart(document.getElementById('uncensored-graph'), config_uncensored);
    //*******************************************


    //CENSORED-GRAPH
    var myDataArray = []; // Create an array to store the data

    for (var i = 1; i <= 18; i++) {
      var myDattaElement = document.getElementById(`my-data_censored${i}`);
      var myDatta = myDattaElement.getAttribute("data-my-data");
      myDataArray.push(myDatta); // Store the data in the array
    }


    const censored_data = {
      labels: ['Chronic Disease', 'Immunisation', 'Maternal Care', 'Under 5 child mortality', 'Food Security', 'Level of Education', 'Drop-out', 'Institutional Credit', 'Land Ownership', 'Sanitation', 'Cooking Fuel', 'Source of Drinking Water', 'Electricity', 'Assets', 'Language', 'Arts and Culture', 'Voted', 'Meetings'],
      datasets: [
        {
          label: 'Censored',
          data: myDataArray,
          fill: false,
          backgroundColor: [
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#C5E0B4',
            '#C5E0B4',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#D9D9D9',
            '#D9D9D9',
            '#F8CBAD',
            '#F8CBAD',
          ],
          // borderColor: 'rgba(75,192,192,1)',
          borderWidth: 1,
        },
      ],
    };



    const config_censored = {
      type: 'bar',
      data: censored_data,
      options: {
        indexAxis: 'y',
        scales: {
          xAxes: [
            {
              ticks: {
                stepSize: 1,
                beginAtZero: true,
                autoSkip: false
              },
            },
          ],
          yAxes: [
            {
              ticks: {
                stepSize: 1,
                beginAtZero: true,
                maxTicksLimit: 20,
                autoSkip: false
              },
            },
          ],

          x: {
            grid: {
              drawOnChartArea: false,
              display: false
            }
          },
          y: {
            grid: {
              drawOnChartArea: false,
              display: false
            }
          }
        },
        plugins: {
          datalabels: {
            anchor: "end",
            align: "right"
          }
        }
      },
      plugins: [ChartDataLabels]
    };

    const censored_graph = new Chart(document.getElementById('censored-graph'), config_censored);
    //********************************









    //Pie chart health
    var myDattaElement = document.getElementById('my-data-health');
    var health_data = {{ health_contributions_to_dimension| safe}};
    const data2 = {

      datasets: [{
        label: '',
        data: health_data,
        backgroundColor: [
          '#315493',
          '#3B64AD',
          '#4472C4',
          '#8FA2D4',
          '',
        ],
        hoverOffset: 4
      }]
    };

    const config2 = {
      type: 'doughnut',
      data: data2,
    };
    const health = new Chart(document.getElementById('health-pie'), config2);


    
    //Pie chart education *********
    var myDattaElement = document.getElementById('my-data-education');
    var education_data = {{ education_contributions_to_dimension| safe}};

    const data3 = {
      // labels: [
      //   'Red',
      //   'Blue',
      //   'Yellow'
      // ],
      datasets: [{
        label: '',
        data: education_data,
        backgroundColor: [
          '#538233',
          '#A1C490',
        ],
        hoverOffset: 4,
      }]
    };

    const config3 = {
      type: 'doughnut',
      data: data3,
    };
    const education = new Chart(document.getElementById('education-pie'), config3);

    //*******************


    //Pie chart sol ***********
    var myDattaElement = document.getElementById('my-data-sol');
    var sol_data = {{ sol_contributions_to_dimension| safe}};
    const data4 = {
      // labels: [
      //   'Red',
      //   'Blue',
      //   'Yellow'
      // ],
      datasets: [{
        label: '',
        data: sol_data,
        backgroundColor: [
          '#C09000',
          '#E2AA00',
          '#FFC000',
          '#FFD184',
          '#FFE0B5',
          '#FFD9A0',

        ],
        hoverOffset: 4
      }]
    };

    const config4 = {
      type: 'doughnut',
      data: data4,
    };
    const sol = new Chart(document.getElementById('sol-pie'), config4);

    //********************

    //Pie chart culture ********
    var myDattaElement = document.getElementById('my-data-culture');
    var culture_data = {{ culture_contributions_to_dimension| safe}};
    const data5 = {
      // labels: [
      //   'Red',
      //   'Blue',
      //   'Yellow'
      // ],
      datasets: [{
        label: '',
        data: culture_data,
        backgroundColor: [
          '#5F5F5F',
          'B3B3B3',

        ],
        hoverOffset: 4
      }]
    };

    const config5 = {
      type: 'doughnut',
      data: data5,
    };
    const culture = new Chart(document.getElementById('culture-pie'), config5);
    //**************


    //Pie chart governance ******
    var myDattaElement = document.getElementById('my-data-governance');
    var governance_data = {{ governance_contributions_to_dimension| safe}};
    const data6 = {
      // labels: [
      //   'Red',
      //   'Blue',
      //   'Yellow'
      // ],
      datasets: [{
        label: '',
        data: governance_data,
        backgroundColor: [
          '#F5C7B8',
          '#F1A78A',
        ],
        hoverOffset: 4
      }]
    };

    const config6 = {
      type: 'doughnut',
      data: data6,
    };
    const governance = new Chart(document.getElementById('governance-pie'), config6);

    //************************


    //Dimension Index And TDI Graph *********
    var graph2_data = {{ tribal_dimensional_index| safe}};
    const ctx = document.getElementById('graph2');



    var tdi = {{ tribe.tribal_index }};

    const data = {
      labels: ['Health Development Index', 'Education Development Index', 'Sol Development Index', 'Culture Development Index', 'Governance Development Index', 'Tribal Development Index'],
      datasets: [
        {
          // label: ['Health Development Index','Education Development Index','Sol Development Index','Culture Development Index','Governance Development Index','Tribal Development Index'],
          data: [...graph2_data, tdi], // Add the additional value to the data list
          backgroundColor: [
            '#4472C4',
            '#ED7D31',
            '#A5A5A5',
            '#FFC000',
            '#5B9BD5',
            '#70AD47', // Color for the additional value
          ],
          borderWidth: 1,
        },
      ],
    };
    const options = {
      plugins: {
        datalabels: {
          display: false,
          color: "black"
        }
      },
      legend: {
        display: false
      }
    }; 

    
 
    

     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
     <script>
      var myDattadis1Element = document.getElementById('my-data-health-district');
      var health_data =myDattadis1Element.getAttribute('data-my-data')
      const datadis1 = {
  
        datasets: [{
          label: '',
          data:{{health_ind_contri_to_dim}} ,
          backgroundColor: [
            '#315493',
            '#3B64AD',
            '#4472C4',
            '#8FA2D4',
           
          ],
          hoverOffset: 4
        }]
      };
  
      const configdis1 = {
        type: 'doughnut',
        data: datadis1,
      };
      const health1 = new Chart(document.getElementById('health-pie-district'), configdis1); 


      var myDattadis2Element = document.getElementById('my-data-education-district');
      var education_data =myDattadis2Element.getAttribute('data-my-data')
      const datadis2= {
  
        datasets: [{
          label: '',
          data:{{education_ind_contri_to_dim}} ,
          backgroundColor: [
            '#315493',
            '#3B64AD',
            '#4472C4',
            '#8FA2D4',
           
          ],
          hoverOffset: 4
        }]
      };
  
      const configdis2= {
        type: 'doughnut',
        data: datadis2,
      };
      const eduaction1 = new Chart(document.getElementById('education-pie-district'), configdis2); 


      var myDattadis3Element = document.getElementById('my-data-sol-district');
      var sol_data =myDattadis3Element.getAttribute('data-my-data')
      const datadis3= {
  
        datasets: [{
          label: '',
          data:{{sol_ind_contri_to_dim}} ,
          backgroundColor: [
            '#315493',
            '#3B64AD',
            '#4472C4',
            '#8FA2D4',
           
          ],
          hoverOffset: 4
        }]
      };
  
      const configdis3= {
        type: 'doughnut',
        data: datadis3,
      };
      const sol1 = new Chart(document.getElementById('sol-pie-district'), configdis3); 


  
  

       const ctx = document.getElementById('graph2_dis');
       
       new Chart(ctx, {
         type: 'bar',
         data: {
           labels: ['Health Development Index', 'Education Development Index', 'Sol Development Index', 'TDI score (Geometric)', ' TDI score (Arithematic)'],
           
           datasets: [{
             label: '',
             data:[...{{district_dimensional_index}},...{{Ddi}}],
             backgroundColor: [
            '#4472C4',
            '#ED7D31',
            '#A5A5A5',
            '#FFC000',
            '#FFC000',
             // Color for the additional value
          ],
             borderWidth: 1
           }]
         },
         options: {
           scales: {
             y: {
               beginAtZero: true
             }
           }
         }
       });
      

   

   

    const censored_data_district = {
      labels: [ 'Under 5 child mortality', 'Food Security','Chronic Disease', 'Immunisation', 'Maternal Care', 'Under 5 child mortality', 'Food Security','Maternal Care', 'Under 5 child mortality', 'Food Security','Chronic Disease', 'Immunisation', 'Maternal Care', 'Under 5 child mortality', 'Food Security','Chronic Disease', 'Immunisation', 'Maternal Care'],
      datasets: [
        {
          label: 'Censored',
          data: {{normalized_final_ind_scores}},
          fill: false,
          backgroundColor: [
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#BDD7EE',
            '#C5E0B4',
            '#C5E0B4',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#FFE699',
            '#D9D9D9',
            '#D9D9D9',
            '#F8CBAD',
            '#F8CBAD',
          ],
          // borderColor: 'rgba(75,192,192,1)',
          borderWidth: 1,
        },
      ],
    };



    const config_censored_district = {
      type: 'bar',
      data: censored_data_district,
      options: {
        indexAxis: 'y',
        scales: {
          xAxes: [
            {
              ticks: {
                stepSize: 1,
                beginAtZero: true,
                autoSkip: false
              },
            },
          ],
          yAxes: [
            {
              ticks: {
                stepSize: 1,
                beginAtZero: true,
                maxTicksLimit: 21,
                autoSkip: false
              },
            },
          ],

          x: {
            grid: {
              drawOnChartArea: false,
              display: false
            }
          },
          y: {
            grid: {
              drawOnChartArea: false,
              display: false
            }
          }
        },
        plugins: {
          datalabels: {
            anchor: "end",
            align: "right"
          }
        }
      },
      plugins: [ChartDataLabels]
    };

    const censored_graph_district = new Chart(document.getElementById('censored-graph-district'), config_censored_district);

    const vertical_graph_element_district = document.getElementById('vertical-bar-graph-district');
    

    
    const vertical_bar_data_district = {
      labels: ['Dimensions'],
      datasets: [
        
        {
          label: 'Sol', // Removed square brackets
          data: [{{sol_contri_to_tdi_sol}}], // Replace with your actual data for 'Sol'
          backgroundColor: '#FFD966', // Color for 'Sol'
        },
        {
          label: 'Education', // Removed square brackets
          data: [{{education_contri_to_tdi}}], // Replace with your actual data for 'Education'
          backgroundColor: '#A9D18E', // Color for 'Education'
        },
        {
          label: 'Health', // Removed square brackets
          data: [{{health_contri_to_tdi}}], // Replace with your actual data for 'Health'
          backgroundColor: '#5B9BD5', // Color for 'Health'
        },
      ],
    };

    const config_vertical_bar_district = {
      type: 'bar',
      data: vertical_bar_data_district,
      options: {
        barPercentage: 2,
        categoryPercentage: 1,
        indexAxis: 'x',
        aspectRatio: 0.02,
        scales: {
          x: {
            stacked: true,
            beginAtZero: true,
            display: false
          },
          y: {
            display: false,
            stacked: true,
            beginAtZero: true,
            maxTicksLimit: 16,
            autoSkip: false,
          },
        },

        plugins: {
          datalabels: {
            anchor: 'center', // Center the labels inside the bars
            align: 'center', // Align the labels to the center
            color: 'white', // Label color
            font: {
              weight: 'bold', // Label font weight
            },
            formatter: function (value, context) {
              const label = vertical_bar_data_district.labels[context.dataIndex];
              const dataset = vertical_bar_data_district.datasets[context.datasetIndex];
              const colorIndex = context.datasetIndex; // Get the color index

              // Create a legend string
              const legend = dataset.label + ',' + value;

              return legend;
            },
            display: 'auto',
          },
          legend: {
            display: false, // Hide the legend
          },
        },
      },
      plugins: [ChartDataLabels]
    };


    const vertical_bar_graph = new Chart(vertical_graph_element_district, config_vertical_bar_district);

     </script>
     
   
    </script>
    
    //**********************











  </script>


</body>

</html>